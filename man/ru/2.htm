<!DOCTYPE html><html><head><meta charset="utf-8" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="" /><meta name="author" content="Namdak Tonpa" /><title>2019-07-01</title><link rel="stylesheet" href="https://n2o.dev/blank.css?v=2" /></head><body><nav>
    <a href="../../index.html">PLM</a>
    <div class="dropdown">
       <a onclick="dropChap()" class="dropbtn">Часть 2</a>
    <div id="dropdownCHAPTER" class="dropdown-content">
       <a href="1.htm">Часть 1</a>
       <a href="2.htm" style="background:#ededed;">Часть 2</a>
       <a href="3.htm">Часть 3</a>
       <a href="4.htm">Часть 4</a>
       <a href="5.htm">Часть 5</a>
       <a href="6.htm">Часть 6</a>
       <a href="7.htm">Часть 7</a>
     </div>
     </div>
    <div class="dropdownLANG">
       <a onclick="dropLang()" class="dropbtn"  >RU</a>
    <div id="dropdownLANG" class="dropdown-content">
       <a href="../ua/2.htm">UA</a>
       <a href="../bg/2.htm">BG</a>
       <a href="../ru/2.htm" style="background:#ededed;">RU</a>
     </div>
     </div>
</nav><header>
</header><main>
    <section>
        <h3>Часть 2. Общая структура</h3>

        <p>В этой статье я расскажу, из чего состоит модуль предприятия.</p>

    </section>
    <section>

        <p>Если рассматривать первичную гранулярность предприятия, которое
           в первом приближении состоит из модулей, то уже на примере PLM
           мы можем обнаружить полную структуру типового модуля, каждый элемент
           из которой представлен в экземпляре PLM.</p>

        <h3>Конфигурация</h3>

        <p>Первый и главный компонент приложения — файл конфигурации
           (для Erlang — <b>sys.config</b>, для Elixir — <b>consig.exs</b>),
           который нужен для множества приложений-зависимостей:
           <b>n2o</b>, <b>kvs</b>, <b>erp</b>, <b>form</b>.
           Это обязательный компонент любого эрланг приложения, которое
           нуждается в этих зависимостях.</p>

        <p>Более подробно о конфигурации Erlang и Elixir приложений можно почитать здесь:</p>

        <p>— <a href="https://erlang.org">Erlang</a><br />
           — <a href="https://elixir-lang.org">Elixir</a></p>

        <h3>Публикация</h3>

        <p>Для построение релиза, обычного запуска или публикации в hex.pm
           с помощью <b>mad</b>, <b>mix</b> или <b>rebar3</b>
           вам необходим файл публикации (для Erlang — <b>rebar.config</b>,
           для Elixir — <b>mix.exs</b>). Файл публикации содержит план запуска приложений.</p>

        <p>Более подробно о публикации Erlang и Elixir приложений можно почитать здесь:</p>

        <p>— <a href="https://mad.n2o.space">mad</a> (Erlang)<br />
           — <a href="https://www.rebar3.org">rebar3</a> (Erlang)<br />
           — <a href="https://elixir-lang.org/getting-started/mix-otp/introduction-to-mix.html">mix</a> (Elixir)</p>

        <h3>Типовые спецификации</h3>

        <p>Типовая спецификация — это совокупность определений типов (type),
           записей (record) и спецификаций функций (spec). Это информация для диалайзера,
           который помогает определить несоответствие кода этим спецификациям. Все системы
           сборки поддерживают проверку dialyzer.</p>

        <p>В типовых спецификациях мы храним внутренние структуры
           фреймворков и приложений, а также бизнес-объектов предприятия.
           Язык описания бизнес объектов поддерживает кортежи (для сообщений)
           суммы (для протоколов), скалярные и векторные типы (для полей).</p>

        <p>Типовые спецификации хранятся в HRL файлах, в папке <b>include</b>.
           Все -spec, -record, -type определения должны быть здесь. В Elixir
           импортируйте их с помощью <b>Record.extract</b>.</p>

        <p>Если приложение не содержит include папки (например, как PLM модуль),
           то это означает, что модуль не определяет никаких дополнительных типов,
           а пользуется типами своих зависимостей, либо не пользуется ими вообще.</p>

        <p>Более подробно о типовых спецификациях и поддерживаемых языках программирования
           можно почитать здесь:</p>

        <p>— <a href="https://bert.n2o.space">bert</a></p>

        <h3>Протоколы</h3>

        <p>Если приложение реализует какой-то протокол, этот протокол встраивается
           в протокольные циклы n2o_mqtt, n2o_ws, n2o_tcp распределенного кольца воркеров,
           которые обслуживают запросы клиентских приложений.</p>

        <p>Список протоколов определяется в переменной protocols библиотеки N2O:</p>

        <figure><code>
  protocols:
  [
    :n2o_heart,
    :n2o_nitro,
    :n2o_ftp,
    :bpe_n2o,
    CHAT.TXT
  ]
        </code></figure>

        <p>А список воркеров, которые реализуют эти протоколы — на эндпойнтах:</p>

        <figure><code>
  mqtt_services: ['erp', 'plm'],
  ws_services: ['chat'],
        </code></figure>

        <p>Протоколы, если они реализованы приложением,
           находятся в папке <b>src/protos</b> и <b>lib/protos</b>
           для Erlang и Elixir соответственно.</p>

        <p>Более подробно о N2O протоколах и их использовании
           можно почитать здесь:</p>

        <p>— <a href="https://ws.n2o.space">n2o</a></p>

        <h3>Цепочки</h3>

        <p>Все типизированные типовыми спецификациями данные хранятся в KVS хранилище.
           Это Erlang-ориентированная абстракция над
           записями/кортежами (records, tuples, C-structures), которая
           позволяет прятать за единым интерфейсом несколько KV хранилищ (включая
           Mnesia, RocksDB, Cassandra).</p>

        <h4>Кортежи и их цепочки</h4>

        <p>В основе KVS лежат понятия кортежа и цепочки. Типы кортежей определяются
           в типовых спецификациях, а цепочки — это последовательности кортежей
           в общем случае любых типов, т.о. можно говорить о гетерогенных и гомогенных цепочках.</p>

        <p>Каждая цепочка индексируется своим идентификатором, который представляет
           собой сегментированый путь в иерархической виртуальной файловой системе.
           Это сделано для того, чтобы префиксным поиском можно было выбрать всех
           детей определённой подветки в иерархии идентификаторов цепочек. Все идентификаторы
           всех цепочек также находятся в цепочке.</p>

        <h4>Схемы</h4>

        <p>Каждый модуль предприятия может включать одну или множество схем.
           Схема — это совокупность типовых спецификаций, другими словами — определённый набор
           кортежей и их типов, как форма дистрибуции
           типовой спецификации.</p>

        <h4>Первичные корневые цепочки</h4>

        <p>Чтобы не создавать руками все базовые словари и основные организационные структуры,
           удобно вынести их в так называемые загрузочные модули. Эти записи автоматически
           создаются при холодном старте приложения <b>ERP</b>. Корневым первичным цепочкам
           посвящены сразу две следующие части:
           Часть 3. Создание первичных цепочек, где рассказывается, как создавать организационную
           структуру предприятия в виде загрузочных модулей первичных корневых цепочек; и
           Часть 4. Создание администратора данных, где рассказывается, как создать
           универсальный просмотрщик цепочек в виде отдельного модуля предприятия.</p>

        <p>Более подробно о системе хранения KVS и управление типовыми спецификациями
           можно почитать здесь:</p>

        <p>— <a href="https://kvs.n2o.space">kvs</a></p>

        <h3>Процессы</h3>

        <p>Если все данные информационной системы предприятия хранятся в цепочках,
           то эволюция этих данных происходит с помощью бизнес-процессов.
           Бизнес-процессы призваны решить определённые проблемы, связанные
           с масштабированием бизнес-логики на производстве, поэтому эта часть
           предприятия хорошо стандартизирована с 2008 года, с появлением более-менее
           универсального стандарта BPMN, который частично поддерживается системой
           управления процессами BPE.</p>

        <p>В общем случае бизнес процессы (БП) — это графовое представление алгоритма с именами переходов,
           состояний и ассоциированных функций. Все бизнес-модули предприятия реализуют
           какой-то главный БП, и серию вспомогательных процессов. БП призваны решить проблему
           изоляции распределённой транзакции, в виде отдельного процесса виртуальной машины.
           Этот БП представляет собой обычную функцию <b>action/2</b>, аргументами которой
           являются идентификаторы цепочек. В качестве эффектов этот БП генерирует данные
           в других цепочках, реализуя таким образом вычислительную модель исчисления процессов.</p>

        <p>Например, БП "Счет в Банке" является циклическим рекуррентным процессом,
           который исходит из, и входит в одно и то же состояние (моноид). В качестве аргумента
           у этой функции, состоящей из одного условия, есть только скалярная
           величина — бизнес объект "Транзакция". Таким образом, трейс этого
           процесса — цепочка транзакций. Операция перевода денег в такой модели
           будет означать распределённую транзакцию между всеми участниками перевода,
           контролируемую отдельным процессом.</p>

        <p>В рассматриваемой системе, модуль PLM включает три процесса:
           1) Процесс "Счет в Банке" финансового модуля FIN;
           2) Процесс "Продукт" модуля PLM;
           3) Процесс "Пре-Продукт" модуля PLM.
           В Части 5. Администратор процессов показано, как создать администратор процессов
           для модуля BPE, который предназначен для ознакомления с системой, а также для
           примитивного ручного тестирования.</p>

        <p>Более подробно о системе управления бизнес-процессами BPE и ее использовании
           можно почитать здесь:</p>

        <p>— <a href="https://bpe.n2o.space">bpe</a></p>

        <h3>Страницы</h3>
        <h3>Редакторы</h3>

        <figure><img src="../images/15.png" /></figure>

        <h3>Векторы</h3>
        <h3>Роутер</h3>

        <p>Более подробно о веб-фреймворке NITRO
           можно почитать здесь:</p>

        <p>— <a href="https://nitro.n2o.space">nitro</a></p>

    </section>
</main><footer>Namdak Tonpa <span class="heart">&#160;❤&#160;</span> 2009—2019</footer>
<script type="text/javascript" src="https://n2o.dev/drop.js"></script>
</body>
</html>
